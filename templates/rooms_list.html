{% extends "base.html" %}
{% block content %}
<h2 class="mb-4">Rooms</h2>

<div class="d-flex justify-content-between align-items-center mb-3">
  <h5 class="m-0">Available Rooms</h5>
  <a class="btn btn-primary" href="{{ url_for('room_new_form') }}">+ New Room</a>
</div>

<table class="table table-sm table-striped align-middle">
  <thead>
    <tr>
      <th>ID</th>
      <th>Name</th>
      <th>Kind</th>
      <th>Capacity</th>
      <th>Rate/hr</th>
      <th style="width:140px;">Actions</th>
    </tr>
  </thead>
  <tbody>
    {% for r in rows %}
    <tr>
      <td>{{ r.room_id }}</td>
      <td>{{ r.room_name }}</td>
      <td>{{ r.kind }}</td>
      <td>{{ r.capacity }}</td>
      <td>{{ "%.2f"|format(r.hourly_rate or 0) }}</td>
      <td class="d-flex gap-2">
        <a class="btn btn-sm btn-outline-secondary"
           href="{{ url_for('room_edit', room_id=r.room_id) }}">Edit</a>

        <form method="POST"
              action="{{ url_for('room_delete', room_id=r.room_id) }}"
              onsubmit="return confirm('Delete this room? This may fail if bookings exist.');">
          <button type="submit" class="btn btn-sm btn-outline-danger">Delete</button>
        </form>
      </td>
    </tr>
    {% endfor %}
  </tbody>
</table>

{% if not rows %}
<p class="text-muted">No rooms found. Click “New Room” to add one.</p>
{% endif %}
{% endblock %}
